<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>WormGPT Red Edition</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ===== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ===== */
    :root {
      --primary: #ff003c;
      --primary-dark: #cc002f;
      --primary-light: #ff3366;
      --bg: #000000;
      --bg-light: #0a0a0a;
      --surface: #0f0f0f;
      --surface-light: #1a1a1a;
      --surface-lighter: #222222;
      --text: #ffffff;
      --text-secondary: #cccccc;
      --text-tertiary: #888888;
      --border: #333333;
      --success: #00ff88;
      --warning: #ffaa00;
      --info: #4dabf7;
      --glow: 0 0 10px rgba(255, 0, 60, 0.2);
      --glow-strong: 0 0 20px rgba(255, 0, 60, 0.4);
    }

    /* ===== Reset ÙˆØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø¹Ø§Ù…Ø© ===== */
    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0; 
      -webkit-tap-highlight-color: transparent; 
    }

    body { 
      font-family: 'Cairo', sans-serif; 
      background: var(--bg); 
      color: var(--text); 
      height: 100vh; 
      display: flex; 
      flex-direction: column; 
      overflow: hidden; 
      line-height: 1.6; 
    }

    /* ===== ØµÙØ­Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ===== */
    .auth-page { 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      min-height: 100vh; 
      padding: 20px; 
    }

    .auth-card { 
      background: var(--surface); 
      border: 1px solid var(--border); 
      border-radius: 16px; 
      padding: 40px; 
      max-width: 400px; 
      width: 100%; 
      box-shadow: var(--glow); 
    }

    .auth-logo { 
      text-align: center; 
      margin-bottom: 30px; 
    }

    .auth-logo .avatar { 
      width: 64px; 
      height: 64px; 
      background: var(--primary); 
      border-radius: 16px; 
      display: inline-flex; 
      align-items: center; 
      justify-content: center; 
      font-size: 28px; 
      font-weight: bold; 
      margin-bottom: 12px; 
      box-shadow: var(--glow-strong); 
    }

    .auth-logo h1 { 
      font-size: 28px; 
    }

    .auth-logo h1 span { 
      color: var(--primary); 
    }

    .auth-logo p { 
      color: var(--text-tertiary); 
      font-size: 14px; 
      margin-top: 4px; 
    }

    .auth-title { 
      font-size: 20px; 
      font-weight: bold; 
      text-align: center; 
      margin-bottom: 24px; 
    }

    .form-group { 
      margin-bottom: 16px; 
    }

    .form-group label { 
      display: block; 
      font-size: 14px; 
      color: var(--text-secondary); 
      margin-bottom: 6px; 
    }

    .form-input { 
      width: 100%; 
      padding: 12px 16px; 
      background: var(--surface-light); 
      border: 1px solid var(--border); 
      border-radius: 10px; 
      color: var(--text); 
      font-family: 'Cairo', sans-serif; 
      font-size: 14px; 
      outline: none; 
      transition: border-color 0.3s; 
    }

    .form-input:focus { 
      border-color: var(--primary); 
      box-shadow: 0 0 0 2px rgba(255,0,60,0.1); 
    }

    .auth-btn { 
      width: 100%; 
      padding: 14px; 
      background: var(--primary); 
      color: white; 
      border: none; 
      border-radius: 10px; 
      font-family: 'Cairo', sans-serif; 
      font-size: 16px; 
      font-weight: bold; 
      cursor: pointer; 
      box-shadow: var(--glow-strong); 
      transition: all 0.2s; 
    }

    .auth-btn:hover { 
      background: var(--primary-dark); 
    }

    .auth-btn:disabled { 
      opacity: 0.6; 
      cursor: not-allowed; 
    }

    .auth-switch { 
      text-align: center; 
      margin-top: 20px; 
    }

    .auth-switch button { 
      background: none; 
      border: none; 
      color: var(--primary); 
      font-family: 'Cairo', sans-serif; 
      cursor: pointer; 
      font-size: 14px; 
    }

    .auth-error { 
      background: rgba(255,0,60,0.1); 
      border: 1px solid var(--primary); 
      color: var(--primary-light); 
      padding: 10px; 
      border-radius: 8px; 
      font-size: 13px; 
      margin-bottom: 16px; 
      text-align: center; 
    }

    /* ===== ØµÙØ­Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© ===== */
    .chat-page { 
      display: flex; 
      flex-direction: column; 
      height: 100vh; 
    }

    /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
    header { 
      background: var(--bg); 
      padding: 15px 20px; 
      display: flex; 
      align-items: center; 
      justify-content: space-between; 
      border-bottom: 1px solid var(--border); 
      box-shadow: var(--glow); 
      z-index: 100; 
      min-height: 70px; 
    }

    .brand-section { 
      display: flex; 
      align-items: center; 
      gap: 12px; 
    }

    .avatar-w { 
      width: 44px; 
      height: 44px; 
      background: var(--primary); 
      color: white; 
      border-radius: 12px; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      font-weight: bold; 
      font-size: 22px; 
      box-shadow: var(--glow); 
    }

    .brand-text h1 { 
      font-size: 20px; 
      line-height: 1.2; 
      margin-bottom: 3px; 
    }

    .brand-text h1 span { 
      color: var(--primary); 
    }

    .brand-text p { 
      font-size: 12px; 
      color: var(--text-tertiary); 
    }

    .header-actions { 
      display: flex; 
      gap: 8px; 
      align-items: center; 
    }

    .header-btn { 
      width: 40px; 
      height: 40px; 
      background: var(--surface-light); 
      border: 1px solid var(--border); 
      border-radius: 10px; 
      color: var(--text-tertiary); 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      cursor: pointer; 
      transition: all 0.2s; 
      font-size: 16px; 
    }

    .header-btn:hover { 
      border-color: var(--primary); 
      color: var(--primary); 
    }

    .premium-badge { 
      display: none; 
      background: rgba(255,170,0,0.15); 
      border: 1px solid rgba(255,170,0,0.3); 
      color: var(--warning); 
      padding: 4px 12px; 
      border-radius: 20px; 
      font-size: 13px; 
    }

    .premium-badge.show { 
      display: flex; 
      align-items: center; 
      gap: 4px; 
    }

    /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© */
    #chat { 
      flex: 1; 
      overflow-y: auto; 
      padding: 20px; 
      display: flex; 
      flex-direction: column; 
      gap: 20px; 
      background: radial-gradient(circle at center, #0a0000 0%, #000000 100%); 
    }

    .message-row { 
      display: flex; 
      gap: 12px; 
      align-items: flex-start; 
      animation: fadeInUp 0.3s ease; 
    }

    .bot-icon { 
      width: 38px; 
      height: 38px; 
      background: var(--surface-light); 
      border: 1px solid var(--primary); 
      border-radius: 10px; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      flex-shrink: 0; 
      color: var(--primary); 
      font-size: 18px; 
    }

    .msg-content { 
      background: var(--surface); 
      padding: 16px; 
      border-radius: 12px; 
      border-right: 3px solid var(--primary); 
      max-width: calc(100% - 50px); 
      box-shadow: 0 2px 8px rgba(0,0,0,0.2); 
    }

    .msg-text { 
      font-size: 14px; 
      line-height: 1.7; 
      color: var(--text-secondary); 
      white-space: pre-wrap; 
    }

    /* ØªÙ†Ø³ÙŠÙ‚ ÙƒØªÙ„Ø© Ø§Ù„ÙƒÙˆØ¯ */
    .code-block {
      background: var(--bg-light);
      border: 1px solid var(--border);
      border-radius: 10px;
      margin: 12px 0;
      direction: ltr;
      text-align: left;
    }

    .code-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      background: var(--surface-lighter);
      border-bottom: 1px solid var(--border);
      border-radius: 10px 10px 0 0;
    }

    .code-language {
      color: var(--primary);
      font-size: 12px;
      font-weight: bold;
    }

    .copy-code-btn {
      background: var(--surface-light);
      border: 1px solid var(--border);
      color: var(--text-tertiary);
      padding: 4px 12px;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
      font-family: 'Cairo', sans-serif;
    }

    .copy-code-btn:hover {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    .code-block pre {
      margin: 0;
      padding: 16px;
      overflow-x: auto;
      background: var(--bg-light);
      border-radius: 0 0 10px 10px;
    }

    .code-block code {
      font-family: 'Courier New', monospace;
      font-size: 13px;
      color: var(--text-secondary);
    }

    /* Ø²Ø± Ù†Ø³Ø® Ø§Ù„Ø±Ø¯ ÙƒØ§Ù…Ù„ */
    .copy-full-response {
      background: var(--surface-light);
      border: 1px solid var(--border);
      color: var(--text-tertiary);
      padding: 4px 12px;
      border-radius: 6px;
      font-size: 11px;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: 8px;
      font-family: 'Cairo', sans-serif;
    }

    .copy-full-response:hover {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    .user-row { 
      justify-content: flex-end; 
      display: flex; 
    }

    .user-msg { 
      background: var(--surface-lighter); 
      color: var(--text); 
      padding: 12px 16px; 
      border-radius: 12px 12px 0 12px; 
      max-width: 85%; 
      font-size: 14px; 
      box-shadow: 0 2px 8px rgba(0,0,0,0.2); 
    }

    /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
    .footer-area { 
      background: var(--bg); 
      border-top: 2px solid var(--primary); 
      box-shadow: 0 -5px 20px rgba(255,0,60,0.1); 
      padding: 16px 20px 20px; 
      z-index: 100; 
    }

    .model-selector { 
      display: flex; 
      gap: 8px; 
      margin-bottom: 12px; 
      background: var(--surface-light); 
      padding: 10px; 
      border-radius: 10px; 
      border: 1px solid var(--border); 
    }

    .model-btn { 
      flex: 1; 
      background: var(--surface-lighter); 
      border: 1px solid var(--border); 
      color: var(--text-tertiary); 
      padding: 10px 8px; 
      border-radius: 8px; 
      cursor: pointer; 
      font-family: 'Cairo', sans-serif; 
      font-size: 13px; 
      font-weight: bold; 
      transition: all 0.3s; 
    }

    .model-btn.active { 
      background: var(--primary); 
      color: white; 
      border-color: var(--primary); 
      box-shadow: var(--glow); 
    }

    .input-container { 
      display: flex; 
      align-items: center; 
      gap: 12px; 
    }

    .input-wrapper { 
      flex: 1; 
      display: flex; 
      align-items: center; 
      background: var(--surface-light); 
      padding: 4px 16px; 
      border-radius: 12px; 
      border: 1px solid var(--border); 
    }

    .input-wrapper:focus-within { 
      border-color: var(--primary); 
      box-shadow: 0 0 0 2px rgba(255,0,60,0.1); 
    }

    input[type="text"] { 
      flex: 1; 
      background: transparent; 
      border: none; 
      color: var(--text); 
      padding: 12px 8px; 
      font-family: 'Cairo', sans-serif; 
      font-size: 14px; 
      width: 100%; 
      outline: none; 
    }

    input[type="text"]::placeholder { 
      color: var(--text-tertiary); 
    }

    .send-btn { 
      background: var(--primary); 
      color: white; 
      border: none; 
      width: 52px; 
      height: 52px; 
      border-radius: 12px; 
      cursor: pointer; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      box-shadow: var(--glow-strong); 
      transition: all 0.2s; 
    }

    .send-btn:hover { 
      background: var(--primary-dark); 
      transform: translateY(-2px); 
    }

    .send-btn:disabled { 
      opacity: 0.5; 
      cursor: not-allowed; 
      transform: none; 
    }

    .info-bar { 
      text-align: center; 
      font-size: 12px; 
      color: var(--text-tertiary); 
      margin-top: 12px; 
    }

    .info-bar button { 
      background: none; 
      border: none; 
      color: var(--primary); 
      cursor: pointer; 
      font-family: 'Cairo', sans-serif; 
      font-size: 12px; 
    }

    /* ===== Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ±Ø®ÙŠØµ ===== */
    .modal-overlay { 
      display: none; 
      position: fixed; 
      inset: 0; 
      background: rgba(0,0,0,0.9); 
      z-index: 200; 
      align-items: center; 
      justify-content: center; 
      padding: 20px; 
      backdrop-filter: blur(4px); 
    }

    .modal-overlay.show { 
      display: flex; 
    }

    .modal-card { 
      background: linear-gradient(135deg, var(--surface-light), var(--surface)); 
      border: 2px solid var(--primary); 
      border-radius: 16px; 
      padding: 32px; 
      max-width: 420px; 
      width: 100%; 
      box-shadow: var(--glow-strong); 
      position: relative; 
    }

    .modal-close { 
      position: absolute; 
      top: 12px; 
      left: 12px; 
      background: none; 
      border: none; 
      color: var(--text-tertiary); 
      cursor: pointer; 
      font-size: 20px; 
    }

    .modal-icon { 
      text-align: center; 
      margin-bottom: 20px; 
    }

    .modal-icon .icon-wrap { 
      display: inline-flex; 
      width: 64px; 
      height: 64px; 
      background: rgba(255,0,60,0.15); 
      border-radius: 16px; 
      align-items: center; 
      justify-content: center; 
      font-size: 32px; 
    }

    .modal-title { 
      text-align: center; 
      font-size: 22px; 
      font-weight: bold; 
      color: var(--primary); 
      margin-bottom: 6px; 
    }

    .modal-desc { 
      text-align: center; 
      color: var(--text-tertiary); 
      font-size: 14px; 
      margin-bottom: 20px; 
    }

    .feature-item { 
      display: flex; 
      align-items: center; 
      gap: 10px; 
      background: var(--surface-lighter); 
      padding: 10px 14px; 
      border-radius: 10px; 
      border: 1px solid var(--border); 
      margin-bottom: 8px; 
      font-size: 13px; 
    }

    .license-input { 
      width: 100%; 
      padding: 12px; 
      background: var(--surface-light); 
      border: 1px solid var(--border); 
      border-radius: 10px; 
      color: var(--text); 
      font-family: monospace; 
      font-size: 15px; 
      text-align: center; 
      letter-spacing: 3px; 
      outline: none; 
      margin: 16px 0; 
    }

    .license-input:focus { 
      border-color: var(--primary); 
    }

    /* ===== ÙƒÙ„Ø§Ø³Ø§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© ===== */
    .hidden { 
      display: none !important; 
    }

    /* ===== Animations ===== */
    @keyframes fadeInUp { 
      from { 
        opacity: 0; 
        transform: translateY(10px); 
      } 
      to { 
        opacity: 1; 
        transform: translateY(0); 
      } 
    }

    .loading-dots { 
      display: inline-flex; 
      gap: 4px; 
    }

    .loading-dots span { 
      width: 8px; 
      height: 8px; 
      background: var(--primary); 
      border-radius: 50%; 
      animation: bounce 1.4s infinite ease-in-out; 
    }

    .loading-dots span:nth-child(1) { 
      animation-delay: 0s; 
    }

    .loading-dots span:nth-child(2) { 
      animation-delay: 0.2s; 
    }

    .loading-dots span:nth-child(3) { 
      animation-delay: 0.4s; 
    }

    @keyframes bounce { 
      0%, 60%, 100% { 
        transform: translateY(0); 
      } 
      30% { 
        transform: translateY(-10px); 
      } 
    }

    /* ===== Scrollbar ===== */
    ::-webkit-scrollbar { 
      width: 6px; 
    }

    ::-webkit-scrollbar-track { 
      background: var(--bg); 
    }

    ::-webkit-scrollbar-thumb { 
      background: var(--border); 
      border-radius: 3px; 
    }

    ::-webkit-scrollbar-thumb:hover { 
      background: var(--primary); 
    }
  </style>
</head>
<body>

<!-- ===== ØµÙØ­Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ===== -->
<div id="authPage" class="auth-page">
  <div class="auth-card">
    <div class="auth-logo">
      <div class="avatar">W</div>
      <h1>Worm<span>GPT</span></h1>
      <p>Red Edition - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</p>
    </div>
    <div class="auth-title" id="authTitle">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
    <div id="authError" class="auth-error hidden"></div>
    <form id="authForm" onsubmit="handleAuth(event)">
      <div class="form-group">
        <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
        <input type="email" id="authEmail" class="form-input" placeholder="example@email.com" required>
      </div>
      <div class="form-group">
        <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
        <input type="password" id="authPassword" class="form-input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required minlength="6">
      </div>
      <button type="submit" class="auth-btn" id="authBtn">Ø¯Ø®ÙˆÙ„</button>
    </form>
    <div class="auth-switch">
      <button onclick="toggleAuthMode()" id="authSwitchBtn">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹</button>
    </div>
  </div>
</div>

<!-- ===== ØµÙØ­Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© ===== -->
<div id="chatPage" class="chat-page hidden">
  <header>
    <div class="brand-section">
      <div class="avatar-w">W</div>
      <div class="brand-text">
        <h1>Worm<span>GPT</span></h1>
        <p>Red Edition</p>
      </div>
    </div>
    <div class="header-actions">
      <div class="premium-badge" id="premiumBadge">ğŸ‘‘ Premium</div>
      <button class="header-btn" onclick="openLicenseModal()" title="Ù…ÙØªØ§Ø­ Ø§Ù„ØªÙØ¹ÙŠÙ„"><i class="fas fa-key"></i></button>
      <button class="header-btn" onclick="handleSignOut()" title="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬"><i class="fas fa-sign-out-alt"></i></button>
    </div>
  </header>

  <div id="chat">
    <div class="message-row">
      <div class="bot-icon"><i class="fas fa-robot"></i></div>
      <div class="msg-content">
        <div class="msg-text">
          Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ <strong>WormGPT Red Edition</strong> ğŸ”´<br>
          Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…. Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ ÙˆØ³Ø£Ø³Ø§Ø¹Ø¯Ùƒ!
        </div>
      </div>
    </div>
  </div>

  <div class="footer-area">
    <div class="model-selector">
      <button class="model-btn active" onclick="selectModel('V1', this)">V1 (Ø³Ø±ÙŠØ¹)</button>
      <button class="model-btn" onclick="selectModel('V2', this)">V2 ğŸ‘‘</button>
      <button class="model-btn" onclick="selectModel('V3', this)">V3 ğŸ‘‘</button>
    </div>
    <div class="input-container">
      <div class="input-wrapper">
        <input type="text" id="msg" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." onkeypress="if(event.key==='Enter')sendMessage()">
      </div>
      <button class="send-btn" id="sendBtn" onclick="sendMessage()">
        <i class="fas fa-paper-plane" style="transform:rotate(180deg)"></i>
      </button>
    </div>
    <div class="info-bar">
      <span>WormGPT Red Edition</span> â€¢
      <span id="licenseStatus"><button onclick="openLicenseModal()">ğŸ”‘ ØªØ±Ù‚ÙŠØ© Ø¥Ù„Ù‰ Premium</button></span>
    </div>
  </div>
</div>

<!-- ===== Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ±Ø®ÙŠØµ ===== -->
<div class="modal-overlay" id="licenseModal">
  <div class="modal-card">
    <button class="modal-close" onclick="closeLicenseModal()"><i class="fas fa-times"></i></button>
    <div class="modal-icon"><div class="icon-wrap">ğŸ‘‘</div></div>
    <div class="modal-title" id="licenseTitle">ØªØ±Ù‚ÙŠØ© Ø¥Ù„Ù‰ Premium</div>
    <div class="modal-desc" id="licenseDesc">Ø§ÙØªØ­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</div>
    <div class="feature-item">âœ¨ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© V2 Ùˆ V3</div>
    <div class="feature-item">ğŸŒ Ø¨Ø­Ø« Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</div>
    <div class="feature-item">ğŸ“ Ø±ÙØ¹ ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª</div>
    <div class="feature-item">ğŸ§  Ø°Ø§ÙƒØ±Ø© Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ù…ØªØ¯Ø©</div>
    <div id="licenseActivation">
      <input type="text" class="license-input" id="licenseKeyInput" placeholder="XXXX-XXXX-XXXX-XXXX" dir="ltr">
      <button class="auth-btn" onclick="activateLicense()" id="activateBtn">ğŸ”‘ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙØªØ§Ø­</button>
      <p style="text-align:center;font-size:12px;color:var(--text-tertiary);margin-top:12px;">Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ ØªÙØ¹ÙŠÙ„ØŒ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</p>
    </div>
    <div id="licensePremiumOk" class="hidden">
      <button class="auth-btn" onclick="closeLicenseModal()">Ø­Ø³Ù†Ø§Ù‹</button>
    </div>
  </div>
</div>

<script>
// ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Supabase =====
const SUPABASE_URL = 'https://ericgpjgmmicasbyhvtn.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVyaWNncGpnbW1pY2FzYnlodnRuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxMjMxOTUsImV4cCI6MjA4NTY5OTE5NX0.v85Slp5Fx1eP2p6f765IsX9vQLO3uBdYsddPoQODlK4';
const CHAT_ENDPOINT = SUPABASE_URL + '/functions/v1/chat';

// ===== Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø© =====
let currentModel = 'V1';
let isLoginMode = true;
let accessToken = null;
let currentUser = null;
let isPremium = false;
let isSending = false;

// ===== Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù€ Supabase =====
async function supabaseAuth(endpoint, body) {
  const res = await fetch(SUPABASE_URL + '/auth/v1/' + endpoint, {
    method: 'POST',
    headers: { 
      'Content-Type': 'application/json', 
      'apikey': SUPABASE_KEY 
    },
    body: JSON.stringify(body)
  });
  return res.json();
}

async function supabaseQuery(table, options = {}) {
  let url = SUPABASE_URL + '/rest/v1/' + table;
  const params = [];
  if (options.select) params.push('select=' + options.select);
  if (options.filters) params.push(...options.filters);
  if (params.length) url += '?' + params.join('&');
  
  const headers = {
    'apikey': SUPABASE_KEY,
    'Content-Type': 'application/json',
    'Prefer': options.prefer || 'return=representation'
  };
  if (accessToken) headers['Authorization'] = 'Bearer ' + accessToken;
  
  const res = await fetch(url, {
    method: options.method || 'GET',
    headers,
    body: options.body ? JSON.stringify(options.body) : undefined
  });
  return res.json();
}

// ===== Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© =====
function toggleAuthMode() {
  isLoginMode = !isLoginMode;
  document.getElementById('authTitle').textContent = isLoginMode ? 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„' : 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯';
  document.getElementById('authBtn').textContent = isLoginMode ? 'Ø¯Ø®ÙˆÙ„' : 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨';
  document.getElementById('authSwitchBtn').textContent = isLoginMode ? 'Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹' : 'Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
  document.getElementById('authError').classList.add('hidden');
}

async function handleAuth(e) {
  e.preventDefault();
  const email = document.getElementById('authEmail').value;
  const password = document.getElementById('authPassword').value;
  const btn = document.getElementById('authBtn');
  const errorDiv = document.getElementById('authError');
  
  btn.disabled = true;
  btn.textContent = 'Ø¬Ø§Ø±ÙŠ...';
  errorDiv.classList.add('hidden');
  
  try {
    if (isLoginMode) {
      const data = await supabaseAuth('token?grant_type=password', { email, password });
      if (data.error) throw new Error(data.error_description || data.msg || 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
      accessToken = data.access_token;
      currentUser = data.user;
      await checkPremiumStatus();
      showChatPage();
    } else {
      const data = await supabaseAuth('signup', { email, password });
      if (data.error) throw new Error(data.error_description || data.msg || 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨');
      errorDiv.textContent = 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
      errorDiv.style.borderColor = 'var(--success)';
      errorDiv.style.color = 'var(--success)';
      errorDiv.style.background = 'rgba(0,255,136,0.1)';
      errorDiv.classList.remove('hidden');
      isLoginMode = true;
      document.getElementById('authTitle').textContent = 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
      document.getElementById('authBtn').textContent = 'Ø¯Ø®ÙˆÙ„';
    }
  } catch (err) {
    errorDiv.textContent = err.message;
    errorDiv.style.borderColor = 'var(--primary)';
    errorDiv.style.color = 'var(--primary-light)';
    errorDiv.style.background = 'rgba(255,0,60,0.1)';
    errorDiv.classList.remove('hidden');
  }
  
  btn.disabled = false;
  btn.textContent = isLoginMode ? 'Ø¯Ø®ÙˆÙ„' : 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨';
}

async function checkPremiumStatus() {
  if (!currentUser) return;
  try {
    const data = await supabaseQuery('profiles', {
      select: 'is_premium',
      filters: ['user_id=eq.' + currentUser.id]
    });
    isPremium = data && data[0] && data[0].is_premium;
  } catch(e) { 
    isPremium = false; 
  }
  updatePremiumUI();
}

function updatePremiumUI() {
  const badge = document.getElementById('premiumBadge');
  const status = document.getElementById('licenseStatus');
  if (isPremium) {
    badge.classList.add('show');
    status.innerHTML = '<span style="color:var(--warning)">ğŸ‘‘ Premium Ù…ÙØ¹Ù„</span>';
  } else {
    badge.classList.remove('show');
    status.innerHTML = '<button onclick="openLicenseModal()">ğŸ”‘ ØªØ±Ù‚ÙŠØ© Ø¥Ù„Ù‰ Premium</button>';
  }
}

function showChatPage() {
  document.getElementById('authPage').classList.add('hidden');
  document.getElementById('chatPage').classList.remove('hidden');
}

async function handleSignOut() {
  if (accessToken) {
    await fetch(SUPABASE_URL + '/auth/v1/logout', {
      method: 'POST',
      headers: { 
        'apikey': SUPABASE_KEY, 
        'Authorization': 'Bearer ' + accessToken 
      }
    }).catch(() => {});
  }
  accessToken = null;
  currentUser = null;
  isPremium = false;
  document.getElementById('chatPage').classList.add('hidden');
  document.getElementById('authPage').classList.remove('hidden');
  document.getElementById('authEmail').value = '';
  document.getElementById('authPassword').value = '';
}

// ===== Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© =====
function selectModel(model, btn) {
  if ((model === 'V2' || model === 'V3') && !isPremium) {
    openLicenseModal();
    return;
  }
  currentModel = model;
  document.querySelectorAll('.model-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
}

// Ø¯Ø§Ù„Ø© Ù„Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©
async function copyToClipboard(text) {
  try {
    await navigator.clipboard.writeText(text);
    return true;
  } catch (err) {
    return false;
  }
}

// Ø¯Ø§Ù„Ø© Ù„Ù†Ø³Ø® Ù…Ø­ØªÙˆÙ‰ ÙƒØªÙ„Ø© Ø§Ù„ÙƒÙˆØ¯
async function copyCodeBlock(button, codeContent) {
  const originalText = button.textContent;
  const success = await copyToClipboard(codeContent);
  
  if (success) {
    button.textContent = 'âœ“ ØªÙ… Ø§Ù„Ù†Ø³Ø®';
    button.style.background = 'var(--success)';
    button.style.color = 'var(--bg)';
    
    setTimeout(() => {
      button.textContent = originalText;
      button.style.background = '';
      button.style.color = '';
    }, 2000);
  } else {
    alert('ÙØ´Ù„ Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯');
  }
}

// Ø¯Ø§Ù„Ø© Ù„Ù†Ø³Ø® Ø§Ù„Ø±Ø¯ ÙƒØ§Ù…Ù„
async function copyFullResponse(button, messageId) {
  const messageText = document.getElementById(messageId).innerText;
  const originalText = button.textContent;
  const success = await copyToClipboard(messageText);
  
  if (success) {
    button.textContent = 'âœ“ ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø¯';
    button.style.background = 'var(--success)';
    button.style.color = 'var(--bg)';
    
    setTimeout(() => {
      button.textContent = originalText;
      button.style.background = '';
      button.style.color = '';
    }, 2000);
  }
}

// Ø¯Ø§Ù„Ø© Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù†Øµ ÙˆØ§ÙƒØªØ´Ø§Ù ÙƒØªÙ„ Ø§Ù„ÙƒÙˆØ¯
function formatMessageWithCodeBlocks(text) {
  // Ù†Ù…Ø· Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† ÙƒØªÙ„ Ø§Ù„ÙƒÙˆØ¯ (```Ù„ØºØ©\nÙƒÙˆØ¯```)
  const codeBlockRegex = /```(\w*)\n([\s\S]*?)```/g;
  let lastIndex = 0;
  let parts = [];
  let match;

  while ((match = codeBlockRegex.exec(text)) !== null) {
    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Øµ Ù‚Ø¨Ù„ ÙƒØªÙ„Ø© Ø§Ù„ÙƒÙˆØ¯
    if (match.index > lastIndex) {
      parts.push({
        type: 'text',
        content: text.substring(lastIndex, match.index)
      });
    }

    // Ø¥Ø¶Ø§ÙØ© ÙƒØªÙ„Ø© Ø§Ù„ÙƒÙˆØ¯
    parts.push({
      type: 'code',
      language: match[1] || 'text',
      code: match[2].trim()
    });

    lastIndex = match.index + match[0].length;
  }

  // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Øµ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
  if (lastIndex < text.length) {
    parts.push({
      type: 'text',
      content: text.substring(lastIndex)
    });
  }

  return parts;
}

// Ø¯Ø§Ù„Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ HTML Ù„Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ø¹ ÙƒØªÙ„ Ø§Ù„ÙƒÙˆØ¯
function createMessageHTML(messageId, text) {
  const parts = formatMessageWithCodeBlocks(text);
  let html = '';

  parts.forEach((part, index) => {
    if (part.type === 'text') {
      html += `<div class="msg-text-part">${escapeHtml(part.content)}</div>`;
    } else {
      const codeBlockId = `code-${messageId}-${index}`;
      html += `
        <div class="code-block">
          <div class="code-header">
            <span class="code-language">${escapeHtml(part.language)}</span>
            <button class="copy-code-btn" onclick="copyCodeBlock(this, document.getElementById('${codeBlockId}').textContent)">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯</button>
          </div>
          <pre><code id="${codeBlockId}">${escapeHtml(part.code)}</code></pre>
        </div>
      `;
    }
  });

  html += `
    <div style="display:flex; justify-content:flex-end; margin-top:12px;">
      <button class="copy-full-response" onclick="copyFullResponse(this, '${messageId}')">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø¯ ÙƒØ§Ù…Ù„</button>
    </div>
  `;

  return html;
}

function escapeHtml(str) {
  const div = document.createElement('div');
  div.textContent = str;
  return div.innerHTML;
}

async function sendMessage() {
  const input = document.getElementById('msg');
  const msg = input.value.trim();
  if (!msg || isSending) return;
  
  isSending = true;
  document.getElementById('sendBtn').disabled = true;
  const chat = document.getElementById('chat');
  
  // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  chat.innerHTML += '<div class="user-row"><div class="user-msg">' + escapeHtml(msg) + '</div></div>';
  input.value = '';
  
  // Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
  const loadingId = 'loading-' + Date.now();
  chat.innerHTML += '<div class="message-row" id="' + loadingId + '"><div class="bot-icon"><i class="fas fa-robot"></i></div><div class="msg-content"><div class="msg-text"><div class="loading-dots"><span></span><span></span><span></span></div> Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙƒØªØ§Ø¨Ø©...</div></div></div>';
  chat.scrollTop = chat.scrollHeight;
  
  try {
    const response = await fetch(CHAT_ENDPOINT, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer ' + SUPABASE_KEY
      },
      body: JSON.stringify({ 
        message: msg, 
        model: currentModel 
      })
    });
    
    if (!response.ok) {
      const err = await response.json().catch(() => ({}));
      throw new Error(err.error || 'ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„');
    }
    
    // Ø¥Ø²Ø§Ù„Ø© Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
    const loadEl = document.getElementById(loadingId);
    if (loadEl) loadEl.remove();
    
    // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ù„Ù„Ø±Ø¯
    const botId = 'bot-' + Date.now();
    chat.innerHTML += `
      <div class="message-row" id="${botId}">
        <div class="bot-icon"><i class="fas fa-robot"></i></div>
        <div class="msg-content">
          <div class="msg-text" id="${botId}-text"></div>
          <div class="msg-footer" style="display:flex; justify-content:space-between; margin-top:8px;">
            <span style="font-size:11px; color:#888;"></span>
            <span style="color:var(--primary); font-size:12px; font-weight:600">WormGPT (${currentModel})</span>
          </div>
        </div>
      </div>
    `;
    
    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„stream
    const reader = response.body.getReader();
    const decoder = new TextDecoder();
    let fullText = '';
    let buffer = '';
    
    while (true) {
      const { done, value } = await reader.read();
      if (done) break;
      buffer += decoder.decode(value, { stream: true });
      
      let nlIdx;
      while ((nlIdx = buffer.indexOf('\n')) !== -1) {
        let line = buffer.slice(0, nlIdx);
        buffer = buffer.slice(nlIdx + 1);
        if (line.endsWith('\r')) line = line.slice(0, -1);
        if (!line.startsWith('data: ')) continue;
        const jsonStr = line.slice(6).trim();
        if (jsonStr === '[DONE]') continue;
        try {
          const parsed = JSON.parse(jsonStr);
          const content = parsed.choices && parsed.choices[0] && parsed.choices[0].delta && parsed.choices[0].delta.content;
          if (content) {
            fullText += content;
            document.getElementById(botId + '-text').innerHTML = createMessageHTML(botId + '-text', fullText);
            chat.scrollTop = chat.scrollHeight;
          }
        } catch(e) {}
      }
    }
    
    if (!fullText) {
      document.getElementById(botId + '-text').innerHTML = '<div class="msg-text-part">Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø±Ø¯</div>';
    }
    
  } catch (err) {
    const loadEl = document.getElementById(loadingId);
    if (loadEl) loadEl.remove();
    chat.innerHTML += `
      <div class="message-row">
        <div class="bot-icon"><i class="fas fa-robot"></i></div>
        <div class="msg-content">
          <div class="msg-text" style="color:var(--primary)">âŒ ${escapeHtml(err.message)}</div>
        </div>
      </div>
    `;
  }
  
  isSending = false;
  document.getElementById('sendBtn').disabled = false;
  chat.scrollTop = chat.scrollHeight;
}

// ===== Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ±Ø®ÙŠØµ =====
function openLicenseModal() {
  const modal = document.getElementById('licenseModal');
  const activation = document.getElementById('licenseActivation');
  const premiumOk = document.getElementById('licensePremiumOk');
  
  if (isPremium) {
    document.getElementById('licenseTitle').textContent = 'Ø£Ù†Øª Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù…ÙŠØ²! ğŸ‰';
    document.getElementById('licenseDesc').textContent = 'Ù„Ø¯ÙŠÙƒ ÙˆØµÙˆÙ„ ÙƒØ§Ù…Ù„ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ù…ÙŠØ²Ø©';
    activation.classList.add('hidden');
    premiumOk.classList.remove('hidden');
  } else {
    document.getElementById('licenseTitle').textContent = 'ØªØ±Ù‚ÙŠØ© Ø¥Ù„Ù‰ Premium';
    document.getElementById('licenseDesc').textContent = 'Ø§ÙØªØ­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©';
    activation.classList.remove('hidden');
    premiumOk.classList.add('hidden');
  }
  modal.classList.add('show');
}

function closeLicenseModal() {
  document.getElementById('licenseModal').classList.remove('show');
}

async function activateLicense() {
  const keyInput = document.getElementById('licenseKeyInput');
  const key = keyInput.value.trim();
  if (!key) { 
    alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ Ø§Ù„ØªÙØ¹ÙŠÙ„'); 
    return; 
  }
  
  const btn = document.getElementById('activateBtn');
  btn.disabled = true;
  btn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...';
  
  try {
    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…ÙØªØ§Ø­
    const keys = await supabaseQuery('license_keys', {
      select: '*',
      filters: ['key=eq.' + key, 'is_active=eq.true']
    });
    
    if (!keys || !keys.length) throw new Error('Ù…ÙØªØ§Ø­ ØºÙŠØ± ØµØ§Ù„Ø­');
    const licenseKey = keys[0];
    
    if (licenseKey.expires_at && new Date(licenseKey.expires_at) < new Date()) 
      throw new Error('Ø§Ù„Ù…ÙØªØ§Ø­ Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©');
    if (licenseKey.current_uses >= licenseKey.max_uses) 
      throw new Error('Ø§Ù„Ù…ÙØªØ§Ø­ ÙˆØµÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰');
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙØ¹ÙŠÙ„Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
    const existing = await supabaseQuery('license_activations', {
      select: 'id',
      filters: ['license_key_id=eq.' + licenseKey.id, 'user_id=eq.' + currentUser.id]
    });
    if (existing && existing.length) 
      throw new Error('Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨ØªÙØ¹ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙØªØ§Ø­ Ù…Ù† Ù‚Ø¨Ù„');
    
    // Ø¥Ù†Ø´Ø§Ø¡ ØªÙØ¹ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
    await supabaseQuery('license_activations', {
      method: 'POST',
      body: { 
        license_key_id: licenseKey.id, 
        user_id: currentUser.id 
      }
    });
    
    // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Øª
    await fetch(SUPABASE_URL + '/rest/v1/license_keys?id=eq.' + licenseKey.id, {
      method: 'PATCH',
      headers: {
        'apikey': SUPABASE_KEY,
        'Authorization': 'Bearer ' + accessToken,
        'Content-Type': 'application/json',
        'Prefer': 'return=minimal'
      },
      body: JSON.stringify({ current_uses: licenseKey.current_uses + 1 })
    });
    
    // ØªØ­Ø¯ÙŠØ« Ù…Ù„Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    await fetch(SUPABASE_URL + '/rest/v1/profiles?user_id=eq.' + currentUser.id, {
      method: 'PATCH',
      headers: {
        'apikey': SUPABASE_KEY,
        'Authorization': 'Bearer ' + accessToken,
        'Content-Type': 'application/json',
        'Prefer': 'return=minimal'
      },
      body: JSON.stringify({ is_premium: true })
    });
    
    isPremium = true;
    updatePremiumUI();
    alert('ØªÙ… Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰');
    closeLicenseModal();
    
  } catch (err) {
    alert(err.message);
  }
  
  btn.disabled = false;
  btn.textContent = 'ğŸ”‘ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙØªØ§Ø­';
}

// Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
document.getElementById('licenseModal').addEventListener('click', function(e) {
  if (e.target === this) closeLicenseModal();
});
</script>
</body>
    </html>
